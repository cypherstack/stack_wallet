/* 
 * This file is part of Stack Wallet.
 * 
 * Copyright (c) 2025 Cypher Stack
 * All Rights Reserved.
 * The code is distributed under GPLv3 license, see LICENSE file for details.
 * Generated by Cypher Stack on 2025-09-16
 *
 */

import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:flutter_svg/flutter_svg.dart';

import '../../themes/stack_colors.dart';
import '../../utilities/assets.dart';
import '../../utilities/clipboard_interface.dart';
import '../../utilities/text_styles.dart';
import '../../utilities/util.dart';
import '../conditional_parent.dart';

class SimplePasteButton extends StatelessWidget {
  const SimplePasteButton({
    super.key,
    required this.onPaste,
    this.clipboard = const ClipboardWrapper(),
  });

  final void Function(String?) onPaste;
  final ClipboardInterface clipboard;

  @override
  Widget build(BuildContext context) {
    return ConditionalParent(
      condition: Util.isDesktop,
      builder:
          (child) =>
              MouseRegion(cursor: SystemMouseCursors.click, child: child),
      child: GestureDetector(
        onTap: () async {
          // TODO handle async better here!!!!!!!!!!!!!!!!!!!!!!!!
          final data = await clipboard.getData(Clipboard.kTextPlain);
          onPaste(data?.text);
        },
        child: Row(
          children: [
            SvgPicture.asset(
              Assets.svg.clipboard,
              width: 10,
              height: 10,
              color: Theme.of(context).extension<StackColors>()!.infoItemIcons,
            ),
            const SizedBox(width: 4),
            Text("Paste", style: STextStyles.link2(context)),
          ],
        ),
      ),
    );
  }
}
